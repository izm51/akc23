(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{136:function(t,e,n){var content=n(153);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(40).default)("9ca92dc0",content,!0,{sourceMap:!1})},137:function(t,e,n){var content=n(155);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(40).default)("dae5561a",content,!0,{sourceMap:!1})},138:function(t,e,n){var content=n(157);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(40).default)("ac598314",content,!0,{sourceMap:!1})},139:function(t,e,n){var content=n(159);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(40).default)("b317b59a",content,!0,{sourceMap:!1})},140:function(t,e,n){var content=n(161);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(40).default)("ddfebe1a",content,!0,{sourceMap:!1})},141:function(t,e,n){var content=n(163);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(40).default)("422ec8e0",content,!0,{sourceMap:!1})},144:function(t,e,n){var content=n(176);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(40).default)("570206be",content,!0,{sourceMap:!1})},152:function(t,e,n){"use strict";var r=n(136);n.n(r).a},153:function(t,e,n){(t.exports=n(39)(!1)).push([t.i,"div.elem-container[data-v-f7a50e32]{position:absolute;left:0;top:0}.debug[data-v-f7a50e32]{border:1px dotted red}.debug .debug-origin[data-v-f7a50e32]{position:absolute;width:3px;height:3px;left:0;top:0;background-color:red}.debug .debug-name[data-v-f7a50e32]{position:absolute;top:-10pt;left:0;font-size:8pt;color:red}",""])},154:function(t,e,n){"use strict";var r=n(137);n.n(r).a},155:function(t,e,n){(t.exports=n(39)(!1)).push([t.i,".maru{width:40px;height:40px;background:#000;position:absolute;top:50%}",""])},156:function(t,e,n){"use strict";var r=n(138);n.n(r).a},157:function(t,e,n){(t.exports=n(39)(!1)).push([t.i,".partner{width:40px;height:40px;background:#000;position:absolute;top:50%}.partner.red{background:red}.partner.blue{background:#00f}",""])},158:function(t,e,n){"use strict";var r=n(139);n.n(r).a},159:function(t,e,n){(t.exports=n(39)(!1)).push([t.i,".item{background:#ff5e00}.item,.negi{width:40px;height:40px;border-radius:50%;position:absolute;top:50%}.negi{background:#00ff0d}",""])},160:function(t,e,n){"use strict";var r=n(140);n.n(r).a},161:function(t,e,n){(t.exports=n(39)(!1)).push([t.i,".base{width:100%;height:80px;background:#444;position:absolute;top:50%}",""])},162:function(t,e,n){"use strict";var r=n(141);n.n(r).a},163:function(t,e,n){(t.exports=n(39)(!1)).push([t.i,".result{width:80vw;height:60vh;background:#fff;border:1px solid #000;border-radius:30px;font-size:24px;text-align:center}.result,.result .message{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.result .message{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}",""])},175:function(t,e,n){"use strict";var r=n(144);n.n(r).a},176:function(t,e,n){(t.exports=n(39)(!1)).push([t.i,".stage-root{height:100vh;width:100vw;max-width:100vw;overflow:hidden}.countdown{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:60vw;height:60vw;background:#fff;border:1px solid #000;border-radius:50%;line-height:55vw;font-size:35vw;text-align:center}",""])},181:function(t,e,n){"use strict";n.r(e);n(41);var r=n(4),o=n(179),c=(n(135),n(20),{props:{debug:{type:[Boolean,String],default:!1},name:{type:String,default:""},ox:{type:[Number,String],default:0},oy:{type:[Number,String],default:0},x:{type:[Number,String],default:0},y:{type:[Number,String],default:0},w:{type:[Number,String],default:0},h:{type:[Number,String],default:0},z:{type:[Number,String],default:0},r:{type:[Number,String],default:0},s:{type:[Number,String,Array],default:1},a:{type:[Number,String],default:1},dur:{type:[Number,String],default:0},easing:{type:String,default:"ease"},disableAnimation:{type:Boolean,default:!0}},data:function(){return{transitionendResolves:[]}},computed:{scaleXY:function(){return Array.isArray(this.s)?"".concat(this.s[0],", ").concat(this.s[1]):this.s}},methods:{clicked:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.$emit.apply(this,["click"].concat(e))},waitTransitionEnd:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,n){e.transitionendResolves.push(t)}));case 1:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),ontransitionend:function(t){this.transitionendResolves.forEach(function(e){e(t)}),this.transitionendResolves=[],this.$emit("transitionend",t)}}}),l=(n(152),n(14)),h=Object(l.a)(c,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"elem-container",class:{debug:t.debug},style:{width:t.w+"px",height:t.h+"px",opacity:t.a,transformOrigin:t.ox+"px "+t.oy+"px",transform:"translate3d("+t.x+"px, "+t.y+"px ,"+t.z+"px) scale("+t.scaleXY+") rotate("+t.r+"deg)",transition:t.disableAnimation?"none":"\n      transform "+t.dur+"ms 0s "+t.easing+",\n      transform-origin "+t.dur+"ms 0s "+t.easing+",\n      opacity "+t.dur+"ms 0s "+t.easing,willChange:"transform"},on:{click:t.clicked,transitionend:function(e){return e.stopPropagation(),t.ontransitionend(e)}}},[t._t("default"),t._v(" "),t.debug?n("div",{staticClass:"debug-origin",style:{transform:"translate("+t.ox+"px, "+t.oy+"px"}}):t._e(),t._v(" "),t.debug?n("div",{staticClass:"debug-name"},[t._v(t._s(t.name))]):t._e()],2)},[],!1,null,"f7a50e32",null).exports,f={name:"Player",components:{ECont:h},props:{x:{type:[Number,String],default:0},y:{type:[Number,String],default:0},r:{type:[Number,String],default:0},s:{type:[Number,String],default:1}},methods:{}},d=(n(154),Object(l.a)(f,function(){var t=this.$createElement,e=this._self._c||t;return e("e-cont",{attrs:{x:this.x-20,y:this.y-20,w:40,h:40,r:this.r,s:this.s,ox:20,oy:20}},[e("div",{staticClass:"maru"})])},[],!1,null,null,null).exports),m={name:"Partner",components:{ECont:h},props:{x:{type:[Number,String],default:0},y:{type:[Number,String],default:0},r:{type:[Number,String],default:0},s:{type:[Number,String],default:1},mode:{type:[Number,String],default:""}}},v=(n(156),Object(l.a)(m,function(){var t=this.$createElement,e=this._self._c||t;return e("e-cont",{attrs:{x:this.x-20,y:this.y-20,w:40,h:40,r:this.r,s:this.s,ox:20,oy:20}},[e("div",{class:{partner:!0,red:0==this.mode,blue:1==this.mode}})])},[],!1,null,null,null).exports),y={name:"Item",components:{ECont:h},props:{x:{type:[Number,String],default:0},y:{type:[Number,String],default:0},r:{type:[Number,String],default:0},s:{type:[Number,String],default:1},type:{type:[String],default:""}},methods:{collide:function(t,e){this.$emit("hit".concat(e),t)}}},w=(n(158),Object(l.a)(y,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("e-cont",{attrs:{x:t.x-20,y:t.y-20,w:40,h:40,r:t.r,s:t.s,ox:20,oy:20}},["negi"===t.type?n("div",{staticClass:"negi"},[t._v(t._s(t.type))]):n("div",{staticClass:"item"},[t._v(t._s(t.type))])])},[],!1,null,null,null).exports),x={name:"Baseline",components:{ECont:h},props:{x:{type:[Number,String],default:0},w:{type:[Number,String],default:0},y:{type:[Number,String],default:0},r:{type:[Number,String],default:0},s:{type:[Number,String],default:1}}},_=(n(160),Object(l.a)(x,function(){var t=this.$createElement,e=this._self._c||t;return e("e-cont",{attrs:{x:this.x,y:this.y-40,w:this.w,h:80,r:this.r,s:this.s,ox:this.w/2,oy:40}},[e("div",{staticClass:"base"})])},[],!1,null,null,null).exports),k={name:"Result",props:{score:{type:[Number,String],default:0}}},S=(n(162),Object(l.a)(k,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"result"},[n("div",{staticClass:"message"},[t._v("\n    "+t._s(t.score)+"歳おめでとう！\n    "),n("div",{on:{click:function(e){return t.$router.push("/")}}},[t._v("TOPへ")])])])},[],!1,null,null,null).exports),N=n(180),O=n(146),I=n(147),E=(n(59),n(60),n(164)),$=n.n(E),j=function(text){return text.charAt(0).toUpperCase()+text.slice(1)},R=function(){function t(){Object(O.a)(this,t),this._comps=[],this.safeMargin=.1,this._lastResult=[]}return Object(I.a)(t,[{key:"add",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(function(e){t._comps.includes(e)||t._comps.push(e)})}},{key:"clear",value:function(){this._comps.length=0}},{key:"detect",value:function(){var t=this,e=this._comps.map(function(e){var n=e.$el;if(!n)return null;var r=n.getBoundingClientRect(),o=r.width*t.safeMargin,c=r.height*t.safeMargin;return[r.x+o,r.y+c,r.x+r.width-o,r.y+r.height-c]}).filter(function(b){return b}),n=$()(e).map(function(e){var n=Object(N.a)(e,2),r=n[0],o=n[1];return[t._comps[r],t._comps[o]]}),r=function(t,e){if(!e.length)return[];if(!t.length)return e;var n=t.map(function(t){return t[0]._uid+"/"+t[1]._uid}),r=e.map(function(t){return t[0]._uid+"/"+t[1]._uid}),o=[];return r.forEach(function(t,r){n.includes(t)||o.push(e[r])}),o}(this._lastResult,n);return this._lastResult=n,r.forEach(function(t){var e=Object(N.a)(t,2),n=e[0],r=e[1],o=j(n.$options._componentTag),c=j(r.$options._componentTag);n.collide&&n.collide(r,c,0),r.collide&&r.collide(n,o,1)}),r}}]),t}(),C=(n(61),function(t){return t===1*t}),M=n(174),P=n.n(M),T=function(){function t(e){Object(O.a)(this,t),this._target=e,this._isSkip=!1}return Object(I.a)(t,[{key:"to",value:function(t,e,n){var r=this;return new Promise(function(o){var c=Date.now(),l={};Object.keys(t).forEach(function(t){l[t]=r._target[t]});!function h(){if(r.isSkip)o(!1);else{var f=Date.now(),d=Math.min(1,(f-c)/e),m=n?n(d):d;r._apply(l,t,m),1===d?o(!0):window.requestAnimationFrame(h)}}()})}},{key:"_apply",value:function(t,e,n){var r=this;Object.keys(e).forEach(function(o){var c=t[o],l=e[o],h=C(c)&&C(l)?c+(l-c)*n:n>.5?l:c;r._target[o]=h})}},{key:"Easing",get:function(){return P.a}},{key:"isSkip",get:function(){return this._isSkip},set:function(t){this._isSkip=!!t}}]),t}(),A={components:{Player:d,Partner:v,Item:w,Baseline:_,Result:S},data:function(){return{collisionDetector:new R,countdown:3,time:0,score:0,level:"hard",throwSpeed:{easy:[2e3,1500],normal:[1e3,1e3],hard:[100,1e3],veryhard:[10,500]},vw:null,vh:null,touch_x:0,partner:{pos:{x:20,y:80,s:1},status:null,mode:0},items:[],itemList:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22"]}},computed:{playerPos:function(){return{x:this.touch_x,y:this.vh-120,s:1}}},created:function(){},mounted:function(){var t=this,e=this;this.vw=window.innerWidth,this.vh=window.innerHeight,this.touch_x=this.vw/2,this.partner.pos.x=this.vw/2,this.$route.query.level&&(this.level=this.$route.query.level),document.body.addEventListener("touchmove",function(t){var n=t.targetTouches[0];e.touch_x=n.pageX},!1),document.body.addEventListener("touchstart",function(t){var n=t.targetTouches[0];e.touch_x=n.pageX},!1);var n=setInterval(function(){t.countdown--,0==t.countdown&&(t.gameStart(),clearInterval(n))},1e3)},methods:{checkCollision:function(){var t;this.collisionDetector.clear(),(t=this.collisionDetector).add.apply(t,[this.$refs.player].concat(Object(o.a)(this.$refs.item||[]),[this.$refs.baseline])),this.collisionDetector.detect()},onItemHitPlayer:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(e,n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:"negi"!=e.type?this.getItem(e.type):this.negiDamege(),this.removeItem(e);case 2:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),onItemHitBaseline:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(e,n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:"negi"!=e.type&&this.lostItem(e.type),this.removeItem(e);case 2:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),getItem:function(t){console.log("get! ",t),this.score++},lostItem:function(t){console.log("lost! ",t)},negiDamege:function(){console.log("neginegi~~"),this.score--},throwItemTiming:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(){var e,n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this.throwSpeed[this.level][0]+1e3*Math.random(),setTimeout(function(){if("walking"===n.partner.status){var t="";if(Math.random()>.3){var e=Math.floor(Math.random()*n.itemList.length);t=n.itemList[e],n.$data.itemList.splice(e,1),-1!=[17,10,5,0].indexOf(n.itemList.length)&&(n.partner.status="stop")}else t="negi";n.throwItem(t),n.throwItemTiming()}},e);case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),throwItem:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=Math.floor(1e5*Math.random()),r={id:n,pos:{x:this.partner.pos.x,y:this.partner.pos.y,s:1},type:e},this.$data.items.push(r),r.tw=new T(r.pos),t.next=6,r.tw.to({x:Math.random()*this.vw,y:this.vh-80},this.throwSpeed[this.level][1]);case 6:t.sent&&this.removeItem(r);case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),removeItem:function(t){var e=this.$data.items.indexOf(t);-1!==e&&this.$data.items.splice(e,1)},movePartner:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.partner.tw=new T(this.partner.pos),this.partner.status="walking";case 2:if("walking"!==this.partner.status){t.next=11;break}return t.next=5,this.partner.tw.to({x:this.vw-20},500);case 5:return t.next=7,this.partner.tw.to({x:20},1e3);case 7:return t.next=9,this.partner.tw.to({x:this.vw/2},500);case 9:t.next=2;break;case 11:this.partnerStopped();case 12:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),partnerStopped:function(){var t=this;if(0!=this.itemList.length){this.partner.mode++;setTimeout(function(){t.movePartner(),t.throwItemTiming()},2e3)}else setTimeout(function(){t.gameSet()},this.throwSpeed[this.level][1]+500)},gameTick:function(){this.time++,this.checkCollision()},gameStart:function(){setInterval(this.gameTick,10);this.movePartner(),this.throwItemTiming()},gameSet:function(){this.partner.mode="end",console.log("GAME SET!"),console.log(this.score+"歳おめでとう！")}}},B=(n(175),Object(l.a)(A,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"stage-root"},[t.countdown>0?n("div",{staticClass:"countdown"},[t._v("\n    "+t._s(t.countdown)+"\n  ")]):t._e(),t._v(" "),n("div",{staticClass:"score"},[t._v("score: "+t._s(t.score))]),t._v(" "),n("player",{ref:"player",attrs:{x:t.playerPos.x,y:t.playerPos.y,s:t.playerPos.s}}),t._v(" "),n("partner",{ref:"partner",attrs:{x:t.partner.pos.x,y:t.partner.pos.y,s:t.partner.pos.s,mode:t.partner.mode}}),t._v(" "),t._l(t.items,function(e){return n("item",{key:"item-"+e.id,ref:"item",refInFor:!0,attrs:{x:e.pos.x,y:e.pos.y,s:e.pos.s,type:e.type},on:{hitPlayer:function(n){return t.onItemHitPlayer(e,n)},hitBaseline:function(n){return t.onItemHitBaseline(e,n)}}})}),t._v(" "),n("baseline",{ref:"baseline",attrs:{x:-100,y:t.vh-60,s:1,w:t.vw+200}}),t._v(" "),"end"==t.partner.mode?n("result",{attrs:{score:t.score}}):t._e()],2)},[],!1,null,null,null));e.default=B.exports}}]);